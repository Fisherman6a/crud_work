<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.crud_backend.mapper.TimetableMapper">

    <select id="selectTimetableByStudentId" resultType="java.util.Map">
        SELECT
            sc.id as selection_id,
            s.id as schedule_id,
            s.course_id,
            s.week_day,
            s.section_start,
            s.section_end,
            s.location,
            s.current_count,
            s.max_capacity,
            c.name as course_name,
            c.credit,
            c.description,
            t.name as teacher_name
        FROM t_student_course sc
        JOIN t_course_schedule s ON sc.schedule_id = s.id
        JOIN t_course c ON s.course_id = c.id
        JOIN t_teacher t ON s.teacher_id = t.id
        WHERE sc.student_id = #{studentId}
    </select>

    <select id="selectAllScheduleDetails" resultType="java.util.Map">
        SELECT
            s.id as schedule_id,
            s.course_id,
            s.week_day,
            s.section_start,
            s.section_end,
            s.location,
            s.current_count,
            s.max_capacity,
            c.name as course_name,
            c.credit,
            c.description,
            t.name as teacher_name
        FROM t_course_schedule s
        JOIN t_course c ON s.course_id = c.id
        JOIN t_teacher t ON s.teacher_id = t.id
    </select>

</mapper>